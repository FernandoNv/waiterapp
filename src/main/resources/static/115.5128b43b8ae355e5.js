"use strict";(self.webpackChunkWaiterApp=self.webpackChunkWaiterApp||[]).push([[115],{9115:(ue,q,c)=>{c.r(q),c.d(q,{ClienteModule:()=>pe});var s=c(6895),m=c(3060),T=c(4004),t=c(4650),y=c(1135),_=c(7579),V=c(6063);class tt extends _.x{constructor(n=1/0,o=1/0,i=V.l){super(),this._bufferSize=n,this._windowTime=o,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=o===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,o)}next(n){const{isStopped:o,_buffer:i,_infiniteTimeWindow:a,_timestampProvider:r,_windowTime:d}=this;o||(i.push(n),!a&&i.push(r.now()+d)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const o=this._innerSubscribe(n),{_infiniteTimeWindow:i,_buffer:a}=this,r=a.slice();for(let d=0;d<r.length&&!n.closed;d+=i?1:2)n.next(r[d]);return this._checkFinalizedStatuses(n),o}_trimBuffer(){const{_bufferSize:n,_timestampProvider:o,_buffer:i,_infiniteTimeWindow:a}=this,r=(a?1:2)*n;if(n<1/0&&r<i.length&&i.splice(0,i.length-r),!a){const d=o.now();let h=0;for(let p=1;p<i.length&&i[p]<=d;p+=2)h=p;h&&i.splice(0,h+1)}}}var et=c(3099);function L(e,n,o){let i,a=!1;return e&&"object"==typeof e?({bufferSize:i=1/0,windowTime:n=1/0,refCount:a=!1,scheduler:o}=e):i=e??1/0,(0,et.B)({connector:()=>new tt(i,n,o),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}var I=c(2340),P=c(529);let U=(()=>{class e{constructor(o,i){this.httpClient=o,this.router=i,this.isClienteLogadoSubject=new y.X(!1),this.baseUrl=`${I.N.apiUrl}`,this.isClienteLogadoSubject.next(this.clienteLogado())}cadastrarCliente(o){const a=this.httpClient.post(`${this.baseUrl}/clientes/`,o).pipe((0,T.U)(r=>({...r,dataCriacao:new Date(r.dataCriacao)})),L());return a.subscribe(r=>{this.saveCliente(r),this.isClienteLogadoSubject.next(!0)}),a}logoutCliente(){this.clienteLogado()&&(window.localStorage.clear(),this.isClienteLogadoSubject.next(!1),this.router.navigate(["/cliente/login"]))}clienteLogado(){return!!window.localStorage.getItem("app:cliente:id")}isClienteLogado(){return this.isClienteLogadoSubject.asObservable()}saveCliente(o){window.localStorage.setItem("app:cliente:nome",o.nome),window.localStorage.setItem("app:cliente:id",o.id.toString()),window.localStorage.setItem("app:cliente:dataCriacao",o.dataCriacao.getTime().toString()),window.localStorage.setItem("app:cliente:cpf",o.cpf)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(P.eN),t.LFG(m.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),N=(()=>{class e{constructor(o,i){this.authService=o,this.router=i}canActivate(o,i){return this.authService.isClienteLogado().pipe((0,T.U)(a=>a||this.router.createUrlTree(["/cliente/login"])))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(U),t.LFG(m.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=c(2722),g=c(5938),f=c(4859),l=c(3626);function ot(e,n){1&e&&(t.TgZ(0,"th",13),t._uU(1,"Nome"),t.qZA())}function nt(e,n){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.item.nome)}}function it(e,n){1&e&&(t.TgZ(0,"th",13),t._uU(1,"Quantidade"),t.qZA())}function at(e,n){if(1&e&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.quantidade)}}function ct(e,n){1&e&&(t.TgZ(0,"th",13),t._uU(1,"A\xe7\xf5es"),t.qZA())}function st(e,n){1&e&&(t.TgZ(0,"td",14)(1,"button",15),t._uU(2," remover "),t.qZA(),t.TgZ(3,"button",16),t._uU(4," adicionar "),t.qZA()())}function rt(e,n){1&e&&t._UZ(0,"tr",17)}function lt(e,n){1&e&&t._UZ(0,"tr",18)}let j=(()=>{class e{constructor(o,i){this.dialogRef=o,this.data=i,this.displayedColumns=["nome","quantidade","acoes"]}ngOnInit(){}onClick(){this.dialogRef.close()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(g.so),t.Y36(g.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cart"]],decls:19,vars:3,consts:[[1,"container","cart-container"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-table","",3,"dataSource"],["matColumnDef","nome"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","quantidade"],["matColumnDef","acoes"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[2,"width","100%"],["mat-raised-button","","color","accent",3,"click"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-raised-button","","color","accent",1,"mx-3"],["mat-raised-button","","color","primary",1,"mx-3"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Items do pedido"),t.qZA(),t.TgZ(3,"div",2)(4,"table",3),t.ynx(5,4),t.YNc(6,ot,2,0,"th",5),t.YNc(7,nt,2,1,"td",6),t.BQk(),t.ynx(8,7),t.YNc(9,it,2,0,"th",5),t.YNc(10,at,2,1,"td",6),t.BQk(),t.ynx(11,8),t.YNc(12,ct,2,0,"th",5),t.YNc(13,st,5,0,"td",6),t.BQk(),t.YNc(14,rt,1,0,"tr",9),t.YNc(15,lt,1,0,"tr",10),t.qZA()(),t.TgZ(16,"mat-dialog-actions",11)(17,"button",12),t.NdJ("click",function(){return i.onClick()}),t._uU(18,"Fechar"),t.qZA()()()),2&o&&(t.xp6(4),t.Q6J("dataSource",i.data),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[f.lW,g.uh,g.xY,g.H8,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk],styles:["[_nghost-%COMP%]{display:block}.cart-container[_ngcontent-%COMP%]{width:700px;display:block}.cart-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}"]}),e})();const dt={id:Number(window.localStorage.getItem("app:cliente:id")),nome:String(window.localStorage.getItem("app:cliente:nome")),cpf:String(window.localStorage.getItem("app:cliente:cpf")),dataCriacao:new Date(Number(window.localStorage.getItem("app:cliente:dataCriacao"))),email:String(window.localStorage.getItem("app:cliente:email"))};let A=(()=>{class e{constructor(o,i){this.authService=o,this.httpClient=i,this.baseUrl=`${I.N.apiUrl}`,this.loadingSubject=new y.X(!1),this.clienteLogadoSubject=new y.X(dt)}cadastrarCliente(o){this.loadingSubject.next(!0);const i=this.authService.cadastrarCliente(o);return i.subscribe({next:a=>{this.clienteLogadoSubject.next(a),this.loadingSubject.next(!1)},error:()=>this.loadingSubject.next(!1)}),i}isClienteLogado(){return this.authService.isClienteLogado()}isLoading(){return this.loadingSubject.asObservable()}clienteLogado(){return this.clienteLogadoSubject.asObservable()}cadastrarPedido(o){this.loadingSubject.next(!0);const a=this.httpClient.post(`${this.baseUrl}/pedidos/`,o).pipe(L());return a.subscribe(r=>{this.loadingSubject.next(!1)}),a}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(U),t.LFG(P.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function pt(e,n){if(1&e&&(t.TgZ(0,"section",9)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"date"),t.qZA()()),2&e){const o=n.ngIf;t.xp6(2),t.hij("Nome: ",o.nome,""),t.xp6(2),t.hij("CPF: ",o.cpf,""),t.xp6(2),t.hij("Data de Cadastro: ",t.xi3(7,3,o.dataCriacao,"dd/MM/yyyy"),"")}}let O=(()=>{class e{constructor(o,i,a){this.clienteService=o,this.dialog=i,this.router=a,this.itensPedido=[],this.valorTotalPedido=0,this.destroy$=new _.x,this.clienteLogado$=this.clienteService.clienteLogado(),this.clienteLogado$.pipe((0,v.R)(this.destroy$)).subscribe(r=>{this.clienteLogado=r})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}ngOnInit(){}onCartClick(){console.log(this.itensPedido),this.dialog.open(j,{data:this.itensPedido}).afterClosed().subscribe(i=>{console.log("fechei o carrinho")})}addItemPedido(o){this.itensPedido.push(o),this.valorTotalPedido=this.itensPedido.reduce((i,a)=>i+a.item.preco*a.quantidade,0)}fazerPedido(){const o={cliente:{id:Number(this.clienteLogado?.id),dataCriacao:this.clienteLogado?.dataCriacao},items:this.itensPedido};console.log(o),this.clienteService.cadastrarPedido(o).pipe((0,v.R)(this.destroy$)).subscribe({next:i=>{console.log(i),this.router.navigate(["/cliente/lista-pedidos"])},error:()=>{console.log("Erro ao fazer o pedido")}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(A),t.Y36(g.uw),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cliente-fazer-pedido"]],decls:19,vars:8,consts:[[1,"app-fazer-pedido"],[1,"row"],["class","col-lg-2 informacoes-cliente p-4",4,"ngIf"],[1,"col-lg-10","conteudo"],[1,"row","px-3"],["matBadgeColor","accent","mat-raised-button","","color","primary",2,"width","64px",3,"matBadge","click"],[1,"row","py-3",3,"app-add-item-pedido"],[1,"container","row","py-3","d-flex","justify-content-end","text-end"],["mat-raised-button","","color","primary",2,"width","160px",3,"disabled","click"],[1,"col-lg-2","informacoes-cliente","p-4"]],template:function(o,i){1&o&&(t.TgZ(0,"app-layout")(1,"div",0)(2,"div",1),t.YNc(3,pt,8,6,"section",2),t.ALo(4,"async"),t.TgZ(5,"section",3)(6,"div",4)(7,"button",5),t.NdJ("click",function(){return i.onCartClick()}),t.TgZ(8,"mat-icon"),t._uU(9,"shopping_cart"),t.qZA()()(),t.TgZ(10,"app-lista-item",6),t.NdJ("app-add-item-pedido",function(r){return i.addItemPedido(r)}),t.qZA(),t.TgZ(11,"div",7)(12,"h3"),t._uU(13),t.ALo(14,"currency"),t.qZA(),t.TgZ(15,"button",8),t.NdJ("click",function(){return i.fazerPedido()}),t.TgZ(16,"mat-icon"),t._uU(17,"checkout"),t.qZA(),t._uU(18," Finalizar Pedido"),t.qZA()()()()()()),2&o&&(t.xp6(3),t.Q6J("ngIf",t.lcZ(4,4,i.clienteLogado$)),t.xp6(4),t.Q6J("matBadge",i.itensPedido.length),t.xp6(6),t.hij("Valor total: ",t.lcZ(14,6,i.valorTotalPedido),""),t.xp6(2),t.Q6J("disabled",!i.itensPedido.length))},styles:["[_nghost-%COMP%]{display:block}.app-fazer-pedido[_ngcontent-%COMP%]{height:100%;width:100%}"]}),e})();var Y=c(3683),w=c(7392);function mt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.onLogout())}),t.TgZ(1,"span",10),t._uU(2),t.qZA(),t.TgZ(3,"mat-icon"),t._uU(4,"logout"),t.qZA()()}if(2&e){const o=t.oxw();t.xp6(2),t.hij(" ",o.nomeCliente," ")}}function ut(e,n){1&e&&(t.TgZ(0,"button",11)(1,"span",10),t._uU(2," Login Funcion\xe1rio "),t.qZA(),t.TgZ(3,"mat-icon"),t._uU(4,"login"),t.qZA()())}const gt=["*"];let M=(()=>{class e{constructor(o){this.authService=o,this.destroy$=new _.x,this.nomeCliente="",this.isClienteLogado$=this.authService.isClienteLogado().pipe((0,v.R)(this.destroy$))}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}ngOnInit(){this.isClienteLogado$.subscribe(o=>{this.nomeCliente=o?window.localStorage.getItem("app:cliente:nome"):""})}onLogout(){this.authService.logoutCliente()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(U))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-layout"]],ngContentSelectors:gt,decls:13,vars:6,consts:[[1,"app-header"],["color","primary"],["mat-button","","routerLink","/cliente/lista-pedidos","aria-label","WaiterApp logo",1,"example-icon"],["src","../../../assets/logo-waiterapp-small.png",1,"logo",2,"margin-left","-30px"],[2,"margin-left","-10px","font-size","1rem"],[1,"example-spacer"],["mat-button","","class","example-icon","aria-label","Logout Cliente button",3,"click",4,"ngIf"],["mat-button","","class","example-icon","aria-label","Login button",4,"ngIf"],[1,"app-main"],["mat-button","","aria-label","Logout Cliente button",1,"example-icon",3,"click"],[2,"margin-right","10px"],["mat-button","","aria-label","Login button",1,"example-icon"]],template:function(o,i){1&o&&(t.F$t(),t.TgZ(0,"header",0)(1,"mat-toolbar",1)(2,"button",2),t._UZ(3,"img",3),t.TgZ(4,"span",4),t._uU(5,"WaiterApp"),t.qZA()(),t._UZ(6,"span",5),t.YNc(7,mt,5,1,"button",6),t.ALo(8,"async"),t.YNc(9,ut,5,0,"button",7),t.ALo(10,"async"),t.qZA()(),t.TgZ(11,"main",8),t.Hsn(12),t.qZA()),2&o&&(t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,i.isClienteLogado$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(10,4,i.isClienteLogado$)))},dependencies:[s.O5,m.rH,Y.Ye,w.Hw,f.lW,s.Ov],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:block}.app-header[_ngcontent-%COMP%]{background-color:#c2185b;box-sizing:border-box;height:64px}.app-header[_ngcontent-%COMP%]   .example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.app-main[_ngcontent-%COMP%]{box-sizing:border-box;background-color:#212121;color:#f0f0f0;padding:20px;height:calc(100vh - 64px)!important;overflow:auto}"]}),e})();var ft=c(4482),$=c(5403),ht=c(4671),Ct=c(5963),_t=c(8421);function D(e=1/0){let n;n=e&&"object"==typeof e?e:{count:e};const{count:o=1/0,delay:i,resetOnSuccess:a=!1}=n;return o<=0?ht.y:(0,ft.e)((r,d)=>{let p,h=0;const Z=()=>{let X=!1;p=r.subscribe((0,$.x)(d,S=>{a&&(h=0),d.next(S)},void 0,S=>{if(h++<o){const W=()=>{p?(p.unsubscribe(),p=null,Z()):X=!0};if(null!=i){const me="number"==typeof i?(0,Ct.H)(i):(0,_t.Xf)(i(S,h)),K=(0,$.x)(d,()=>{K.unsubscribe(),W()},()=>{d.complete()});me.subscribe(K)}else W()}else d.error(S)})),X&&(p.unsubscribe(),p=null,Z())};Z()})}var k=c(1005);let xt=(()=>{class e{constructor(o){this.httpClient=o,this.baseUrl=`${I.N.apiUrl}/pedidos`,this.loadingSubject=new y.X(!1)}listaPedidosByIdCliente(o){this.loadingSubject.next(!0);const a=this.httpClient.get(`${this.baseUrl}/clientes/${o}`).pipe(D(3),(0,k.g)(500),L(),(0,T.U)(r=>r.map(d=>({...d,dataCriacao:new Date(d.dataCriacao)}))));return a.subscribe({next:r=>{console.log(r),this.loadingSubject.next(!1)},error:r=>{this.loadingSubject.next(!1),console.log("Erro na requisi\xe7\xe3o ",r)}}),a}isLoading(){return this.loadingSubject.asObservable()}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(P.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=c(1572),F=c(6308);function yt(e,n){1&e&&(t.TgZ(0,"div",2),t._UZ(1,"mat-spinner"),t.qZA())}function vt(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1,"ID"),t.qZA())}function bt(e,n){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.id)}}function Zt(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Data do Pedido"),t.qZA())}function Tt(e,n){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,o.dataCriacao,"dd/MM/yyyy hh:mm"))}}function Lt(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Estado"),t.qZA())}function It(e,n){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.estado)}}function Pt(e,n){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Gar\xe7om"),t.qZA())}function At(e,n){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.garcom?o.garcom.nome:"A ser escolhido")}}function wt(e,n){1&e&&(t.TgZ(0,"th",17),t._uU(1,"Pre\xe7o Total"),t.qZA())}function St(e,n){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,o.precoTotal))}}function Ut(e,n){1&e&&t._UZ(0,"tr",18)}function Ot(e,n){1&e&&t._UZ(0,"tr",19)}const Mt=function(){return[]};function Ft(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",3)(1,"table",4),t.NdJ("matSortChange",function(a){t.CHM(o);const r=t.oxw();return t.KtG(r.sortData(a))}),t.ynx(2,5),t.YNc(3,vt,2,0,"th",6),t.YNc(4,bt,2,1,"td",7),t.BQk(),t.ynx(5,8),t.YNc(6,Zt,2,0,"th",6),t.YNc(7,Tt,3,4,"td",7),t.BQk(),t.ynx(8,9),t.YNc(9,Lt,2,0,"th",6),t.YNc(10,It,2,1,"td",7),t.BQk(),t.ynx(11,10),t.YNc(12,Pt,2,0,"th",6),t.YNc(13,At,2,1,"td",7),t.BQk(),t.ynx(14,11),t.YNc(15,wt,2,0,"th",12),t.YNc(16,St,3,3,"td",7),t.BQk(),t.YNc(17,Ut,1,0,"tr",13),t.YNc(18,Ot,1,0,"tr",14),t.qZA()()}if(2&e){const o=t.oxw();t.xp6(1),t.Q6J("dataSource",o.pedidos$?o.pedidos$:t.DdM(3,Mt)),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns)}}let J=(()=>{class e{constructor(o,i){this.pedidoService=o,this.clienteService=i,this.destroy$=new _.x,this.isLoading=!1,this.displayedColumns=["id","dataCriacao","estado","garcom","precoTotal"],this.loading$=this.pedidoService.isLoading(),this.clienteService.clienteLogado().pipe((0,v.R)(this.destroy$)).subscribe(a=>{this.pedidos$=this.pedidoService.listaPedidosByIdCliente(Number(a.id))})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}ngOnInit(){}sortData(o){console.log(o)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(xt),t.Y36(A))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-lista-pedidos"]],decls:4,vars:6,consts:[["class","d-flex justify-content-center align-items-center",4,"ngIf"],["class","row",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row"],["mat-table","","matSort","","matSortDirection","desc","matSortActive","dataCriacao",1,"col",3,"dataSource","matSortChange"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","dataCriacao"],["matColumnDef","estado"],["matColumnDef","garcom"],["matColumnDef","precoTotal"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by precoTotal","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by precoTotal",1,"text-center"],["mat-header-row",""],["mat-row",""]],template:function(o,i){1&o&&(t.YNc(0,yt,2,0,"div",0),t.ALo(1,"async"),t.YNc(2,Ft,19,4,"div",1),t.ALo(3,"async")),2&o&&(t.Q6J("ngIf",t.lcZ(1,2,i.loading$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(3,4,i.loading$)))},dependencies:[s.O5,x.Ou,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,F.YE,F.nU,s.Ov,s.H9,s.uU],styles:["[_nghost-%COMP%]{display:block}.mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{cursor:pointer}  .mat-sort-header-container{display:flex;justify-content:center;align-items:center}"]}),e})();function qt(e,n){if(1&e&&(t.TgZ(0,"section",4)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"button",5),t._uU(9,"Fazer novo Pedido"),t.qZA()()),2&e){const o=n.ngIf;t.xp6(2),t.hij("Nome: ",o.nome,""),t.xp6(2),t.hij("CPF: ",o.cpf,""),t.xp6(2),t.hij("Data de Cadastro: ",t.xi3(7,3,o.dataCriacao,"dd/MM/yyyy"),"")}}let Q=(()=>{class e{constructor(o,i){this.clienteService=o,this.router=i,this.buttonFazerPedidoCliked=!1,this.clienteLogado$=this.clienteService.clienteLogado()}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(A),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cliente-lista-pedidos"]],decls:7,vars:3,consts:[[1,"app-cliente"],[1,"row"],["class","col-lg-2 informacoes-cliente p-4",4,"ngIf"],[1,"col-lg-10","conteudo","p-4"],[1,"col-lg-2","informacoes-cliente","p-4"],["mat-raised-button","","color","warn","routerLink","/cliente/fazer-pedido","routerLinkActive","active"]],template:function(o,i){1&o&&(t.TgZ(0,"app-layout")(1,"div",0)(2,"div",1),t.YNc(3,qt,10,6,"section",2),t.ALo(4,"async"),t.TgZ(5,"section",3),t._UZ(6,"app-lista-pedidos"),t.qZA()()()()),2&o&&(t.xp6(3),t.Q6J("ngIf",t.lcZ(4,1,i.clienteLogado$)))},dependencies:[s.O5,m.rH,m.Od,M,J,f.lW,s.Ov,s.uU],styles:["[_nghost-%COMP%]{display:block}.app-cliente[_ngcontent-%COMP%]{height:100%;width:100%}"]}),e})();var u=c(4006),b=c(9549),z=c(4144);function Nt(e,n){1&e&&(t.TgZ(0,"section",1),t._UZ(1,"mat-spinner"),t.qZA())}function jt(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Oqu(o.getErrorMessage())}}function Yt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"section",1)(1,"h1"),t._uU(2,"Fa\xe7a o seu pedido"),t.qZA(),t.TgZ(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),t._uU(6,"Nome"),t.qZA(),t._UZ(7,"input",4),t.TgZ(8,"mat-hint"),t._uU(9,"Insira o seu nome"),t.qZA(),t.YNc(10,jt,2,1,"mat-error",5),t.qZA(),t.TgZ(11,"mat-form-field",3)(12,"mat-label"),t._uU(13,"CPF"),t.qZA(),t._UZ(14,"input",6),t.TgZ(15,"mat-hint"),t._uU(16,"O CPF \xe9 opcional"),t.qZA()(),t.TgZ(17,"button",7),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.onSubmit())}),t._uU(18,"Continuar"),t.qZA()()()}if(2&e){const o=t.oxw();t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(4),t.Q6J("formControl",o.nomeFormControl),t.xp6(3),t.Q6J("ngIf",o.nomeFormControl.invalid),t.xp6(4),t.Q6J("formControl",o.cpfFormControl),t.xp6(3),t.Q6J("disabled",!o.nomeFormControl.valid)}}const $t=[{path:"",redirectTo:"fazer-pedido",pathMatch:"full"},{path:"fazer-pedido",canActivate:[N],component:O},{path:"lista-pedidos",canActivate:[N],component:Q},{path:"login",component:(()=>{class e{constructor(o,i,a){this.formBuilder=o,this.clienteService=i,this.router=a,this.nomeFormControl=new u.NI("",[u.kI.required]),this.cpfFormControl=new u.NI(""),this.destroy$=new _.x,this.form=this.formBuilder.group({name:this.nomeFormControl,cpf:this.cpfFormControl}),this.loading$=this.clienteService.isLoading()}ngOnInit(){}getErrorMessage(){return this.nomeFormControl.hasError("required")?"Voc\xea precisa informar o seu nome":"rodei a msg de erro"}onSubmit(){if(this.nomeFormControl.valid){const o={nome:this.nomeFormControl.value?.trim(),cpf:this.cpfFormControl.value&&this.cpfFormControl.value?.trim().length>0?this.cpfFormControl.value:void 0};this.clienteService.cadastrarCliente(o).pipe((0,v.R)(this.destroy$)).subscribe({next:i=>{this.router.navigate(["/cliente"])},error:()=>console.log("Erro na requisicao de cadastro")})}}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.qu),t.Y36(A),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cliente-login"]],decls:5,vars:6,consts:[["class","section-cliente-login",4,"ngIf"],[1,"section-cliente-login"],[1,"form-login",3,"formGroup"],["appearance","fill"],["matInput","","name","any-nome","required","",3,"formControl"],[4,"ngIf"],["matInput","","name","any-cpf",3,"formControl"],["mat-raised-button","","type","button","color","primary",3,"disabled","click"]],template:function(o,i){1&o&&(t.TgZ(0,"app-layout"),t.YNc(1,Nt,2,0,"section",0),t.ALo(2,"async"),t.YNc(3,Yt,19,5,"section",0),t.ALo(4,"async"),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.loading$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(4,4,i.loading$)))},dependencies:[s.O5,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.oH,u.sg,M,b.TO,b.KE,b.bx,b.hX,z.Nt,f.lW,x.Ou,s.Ov],styles:["[_nghost-%COMP%]{display:block}.section-cliente-login[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.section-cliente-login[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}.section-cliente-login[_ngcontent-%COMP%]   .form-login[_ngcontent-%COMP%]{min-width:200px;max-width:500px;width:100%;display:flex;flex-direction:column;align-items:center}.section-cliente-login[_ngcontent-%COMP%]   .form-login[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], .section-cliente-login[_ngcontent-%COMP%]   .form-login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:20px 0}.section-cliente-login[_ngcontent-%COMP%]   .form-login[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;font-size:1.1em}"]}),e})()}];let Dt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild($t),m.Bz]}),e})();const kt=[Y.g0,w.Ps,f.ot],Jt=[s.ez,m.Bz];let Qt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[Jt,kt]}),e})();var zt=c(782),C=c(3546);function Rt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"mat-card",1),t.NdJ("click",function(){t.CHM(o);const a=t.oxw();return t.KtG(a.onClickItem())}),t.TgZ(1,"mat-card-title-group")(2,"mat-card-title"),t._uU(3),t.qZA()(),t.TgZ(4,"mat-card-content")(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"currency"),t.qZA()()()}if(2&e){const o=t.oxw();t.xp6(3),t.Oqu(o.item.nome),t.xp6(3),t.Oqu(o.item.descricao),t.xp6(2),t.Oqu(t.lcZ(9,4,o.item.dataCriacao)),t.xp6(3),t.Oqu(t.lcZ(12,6,o.item.preco))}}let B=(()=>{class e{constructor(){this.itemClicked=new t.vpe}ngOnInit(){}onClickItem(){this.itemClicked.emit(this.item)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-item"]],inputs:{item:"item"},outputs:{itemClicked:"app-item-clicked"},decls:1,vars:1,consts:[["class","item-card",3,"click",4,"ngIf"],[1,"item-card",3,"click"]],template:function(o,i){1&o&&t.YNc(0,Rt,13,8,"mat-card",0),2&o&&t.Q6J("ngIf",i.item)},dependencies:[s.O5,C.a8,C.C1,C.dn,C.n5,s.H9,s.uU],styles:["[_nghost-%COMP%]{display:block}.item-card[_ngcontent-%COMP%]{min-width:150px;border:2px solid transparent;transition:.2s border}.item-card[_ngcontent-%COMP%]:hover{border:2px solid #c2185b;cursor:pointer}"]}),e})();function Bt(e,n){if(1&e&&(t.TgZ(0,"div")(1,"h4"),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"h4"),t._uU(6),t.qZA()()),2&e){const o=n.$implicit;t.xp6(2),t.hij(" ",o.nome,""),t.xp6(2),t.hij(" ",o.descricao," "),t.xp6(2),t.hij(" Calorias: ",o.caloria," ")}}function Et(e,n){if(1&e&&(t.TgZ(0,"span")(1,"h3"),t._uU(2,"Ingredientes:"),t.qZA(),t.YNc(3,Bt,7,3,"div",9),t.qZA()),2&e){const o=t.oxw();t.xp6(3),t.Q6J("ngForOf",o.prato.ingredientes)}}function Ht(e,n){if(1&e&&(t.TgZ(0,"span")(1,"h2"),t._uU(2),t.qZA()()),2&e){const o=t.oxw();t.xp6(2),t.hij("Quantidade: ",o.bebida.quantidade,"")}}let E=(()=>{class e{constructor(o,i){this.dialogRef=o,this.data=i,this.isPrato=!1,"quantidade"in i?this.bebida=i:this.prato=i}ngOnInit(){}onClick(){this.dialogRef.close({item:this.data,quantidade:1})}onClose(){this.dialogRef.close()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(g.so),t.Y36(g.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-item-detalhe"]],decls:22,vars:10,consts:[[1,"row","item-detalhe"],[1,"col"],["mat-dialog-title","",1,"text-center"],["mat-dialog-content","",1,"d-flex","justify-content-center","text-center"],[1,"row"],[4,"ngIf"],["mat-dialog-actions","",1,"d-flex","justify-content-between"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","primary",3,"click"],[4,"ngFor","ngForOf"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"div",1)(7,"h2"),t._uU(8),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"date"),t.qZA(),t.YNc(12,Et,4,1,"span",5),t.YNc(13,Ht,3,1,"span",5),t.TgZ(14,"h2"),t._uU(15),t.ALo(16,"currency"),t.qZA()()()(),t.TgZ(17,"div",6)(18,"button",7),t.NdJ("click",function(){return i.onClose()}),t._uU(19,"Fechar"),t.qZA(),t.TgZ(20,"button",8),t.NdJ("click",function(){return i.onClick()}),t._uU(21,"Adicionar ao carrinho"),t.qZA()()()()),2&o&&(t.xp6(3),t.Oqu(i.data.nome),t.xp6(5),t.hij(" ",i.data.descricao," "),t.xp6(2),t.hij("Data de cadastro: ",t.lcZ(11,6,i.data.dataCriacao),""),t.xp6(2),t.Q6J("ngIf",i.prato),t.xp6(1),t.Q6J("ngIf",i.bebida),t.xp6(2),t.hij("Pre\xe7o: ",t.lcZ(16,8,i.data.preco),""))},dependencies:[s.sg,s.O5,f.lW,s.H9,s.uU],styles:["[_nghost-%COMP%]{display:block}.item-detalhe[_ngcontent-%COMP%]{width:500px}"]}),e})(),Gt=(()=>{class e{constructor(o){this.httpCliente=o,this.loadingSubject=new y.X(!1),this.baseUrl=`${I.N.apiUrl}/itens`}listaItems(){const o=`${this.baseUrl}`;this.loadingSubject.next(!0);const i=this.httpCliente.get(o).pipe((0,k.g)(1e3),D(3),(0,T.U)(a=>a.map(d=>"quantidade"in d?this.fixDate(d):{...this.fixDate(d),ingredientes:d.ingredientes.map(Z=>this.fixDate(Z))})),L());return i.subscribe({next:a=>{this.loadingSubject.next(!1),console.log(a)},error:()=>this.loadingSubject.next(!1)}),i}fixDate(o){return{...o,dataCriacao:new Date(o.dataCriacao),descricao:null===o.descricao||0===o.descricao.length?"Sem descri\xe7\xe3o":o.descricao}}isLoading(){return this.loadingSubject.asObservable()}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(P.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Xt(e,n){1&e&&(t.TgZ(0,"div",3),t._UZ(1,"mat-spinner"),t.qZA())}function Wt(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",4)(1,"app-item",5),t.NdJ("app-item-clicked",function(a){t.CHM(o);const r=t.oxw();return t.KtG(r.clickItem(a))}),t.qZA()()}if(2&e){const o=n.$implicit;t.xp6(1),t.Q6J("item",o)}}let H=(()=>{class e{constructor(o,i){this.itemService=o,this.dialog=i,this.destroy$=new _.x,this.addItemPedidoEmitter=new t.vpe,this.loading$=this.itemService.isLoading(),this.listaItem$=this.itemService.listaItems()}ngOnInit(){}clickItem(o){this.dialog.open(E,{data:o}).afterClosed().subscribe(a=>{a&&this.addItemPedidoEmitter.emit(a)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(Gt),t.Y36(g.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-lista-item"]],outputs:{addItemPedidoEmitter:"app-add-item-pedido"},decls:5,vars:6,consts:[["class","d-flex justify-content-center align-items-center",4,"ngIf"],[1,"row"],["class","col-lg-3 py-3 py-lg-0",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","align-items-center"],[1,"col-lg-3","py-3","py-lg-0"],[3,"item","app-item-clicked"]],template:function(o,i){1&o&&(t.YNc(0,Xt,2,0,"div",0),t.ALo(1,"async"),t.TgZ(2,"div",1),t.YNc(3,Wt,2,1,"div",2),t.ALo(4,"async"),t.qZA()),2&o&&(t.Q6J("ngIf",t.lcZ(1,2,i.loading$)),t.xp6(3),t.Q6J("ngForOf",t.lcZ(4,4,i.listaItem$)))},dependencies:[s.sg,s.O5,x.Ou,B,s.Ov],styles:["[_nghost-%COMP%]{display:block}"]}),e})();const Kt=[x.Cq,C.QW,f.ot],Vt=[s.ez];let te=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[Vt,Kt]}),e})();const ee=[s.ez],oe=[C.QW,f.ot,g.Is,l.p0];let ne=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[ee,oe]}),e})();var G=c(2673);const ae=[x.Cq,l.p0,F.JX,f.ot],ce=[s.ez],re=[s.ez,m.Bz,Dt,u.UX],le=[Qt,te,ne,(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[ce,ae]}),e})()],de=[z.c,b.lN,f.ot,x.Cq,zt.N6,C.QW,w.Ps,g.Is,G.g];let pe=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[re,le,de]}),e})();t.B6R(O,[s.O5,M,H,f.lW,w.Hw,G.k],[s.Ov,s.H9,s.uU])}}]);